@import "tailwindcss";

@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-border: var(--border);
  --color-border-dark: var(--border-dark);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-hover: var(--accent-hover);
  --color-accent-muted: var(--accent-muted);
  --color-accent-dark: var(--accent-dark);
  --color-surface: var(--surface);
  --color-surface-text: var(--surface-text);
  --color-surface-secondary: var(--surface-secondary);
  --color-surface-tertiary: var(--surface-tertiary);
  --color-foreground-secondary: var(--foreground-secondary);
  --color-success: var(--success);
  --color-error: var(--error);
  --color-shadow: var(--shadow);

  --font-family-sans:
    -apple-system,
    BlinkMacSystemFont,
    "SF Pro Text",
    "SF Pro Display",
    "Google Sans Text",
    "Google Sans",
    var(--font-geist-sans),
    Roboto,
    system-ui,
    "Segoe UI",
    "Helvetica Neue",
    Arial,
    "PingFang SC",
    "Hiragino Sans GB",
    "Microsoft YaHei UI",
    "Microsoft YaHei",
    "Noto Sans CJK SC",
    sans-serif;
  --font-family-mono:
    "SF Mono",
    SFMono-Regular,
    "SF Pro Mono",
    "Google Sans Code",
    "Roboto Mono",
    var(--font-geist-mono),
    ui-monospace,
    Menlo,
    Consolas,
    "Liberation Mono",
    "Courier New",
    "Maple Mono NF CN",
    "Maple Mono SC NF",
    "Sarasa Mono SC",
    "LXGW WenKai Mono",
    "Noto Sans Mono CJK SC",
    "Source Han Mono SC",
    "WenQuanYi Zen Hei Mono",
    "PingFang SC",
    "Hiragino Sans GB",
    "Microsoft YaHei UI",
    "Microsoft YaHei",
    "Noto Sans CJK SC",
    monospace;
}

@import "overlayscrollbars/overlayscrollbars.css";
@import "@xterm/xterm/css/xterm.css";

:root {
  --background: #fafafa;
  --foreground: #0a0a0a;
  --border: #e5e5e5;
  --border-dark: #404040;
  --muted: #737373;
  --muted-foreground: #a3a3a3;
  --accent: #0a0a0a;
  --accent-hover: #f5f5f5;
  --accent-muted: #404040;
  --accent-dark: #000000;
  --surface: #171717;
  --surface-text: #fafafa;
  --surface-secondary: #f5f5f5;
  --surface-tertiary: #e5e5e5;
  --foreground-secondary: #404040;
  --success: #000000;
  --error: #000000;
  --shadow: #000000;
}

.dark {
  --background: #282c34;
  --foreground: #abb2bf;
  --border: #3e4451;
  --border-dark: #4b5263;
  --muted: #636d83;
  --muted-foreground: #5c6370;
  --accent: #abb2bf;
  --accent-hover: #2c313c;
  --accent-muted: #4b5263;
  --accent-dark: #e5c07b;
  --surface: #21252b;
  --surface-text: #abb2bf;
  --surface-secondary: #2c313c;
  --surface-tertiary: #3e4451;
  --foreground-secondary: #abb2bf;
  --success: #98c379;
  --error: #e06c75;
  --shadow: #000000;
}

html,
body {
  color: var(--foreground);
  background: var(--background);
  font-family: var(--font-family-mono);
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
  overscroll-behavior: none;
}

html {
  height: 100%;
}

body {
  height: 100%;
  min-height: 100%;
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background-color: var(--border);
}

*::-webkit-scrollbar-thumb:hover {
  background-color: var(--muted-foreground);
}

*::-webkit-scrollbar-corner {
  background: transparent;
}

html::-webkit-scrollbar,
body::-webkit-scrollbar {
  display: none;
}

html,
body {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scrollbar-sharp {
  overflow: auto !important;
}

.scrollbar-sharp::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.scrollbar-sharp::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-sharp::-webkit-scrollbar-thumb {
  background-color: var(--border);
}

.scrollbar-sharp::-webkit-scrollbar-thumb:hover {
  background-color: var(--muted-foreground);
}

/* OverlayScrollbars custom theme - subtle shadow on hover */
.os-theme-monochrome {
  --os-size: 14px;
  --os-padding-perpendicular: 3px;
  --os-padding-axis: 3px;
  --os-track-border-radius: 0;
  --os-handle-border-radius: 0;
  --os-handle-bg: transparent;
  --os-handle-bg-hover: color-mix(in srgb, var(--foreground) 15%, transparent);
  --os-handle-bg-active: color-mix(in srgb, var(--foreground) 25%, transparent);
}

.os-theme-monochrome .os-scrollbar {
  padding: 0 !important;
}

.os-theme-monochrome .os-scrollbar .os-scrollbar-track {
  background: transparent !important;
}

.os-theme-monochrome .os-scrollbar-vertical .os-scrollbar-track {
  border-left: none !important;
}

.os-theme-monochrome .os-scrollbar-horizontal .os-scrollbar-track {
  border-top: none !important;
}

.os-theme-monochrome .os-scrollbar .os-scrollbar-handle {
  border-radius: 0 !important;
  border: none !important;
  background: color-mix(in srgb, var(--foreground) 8%, transparent) !important;
  transition: background-color 0.15s ease !important;
}

.os-theme-monochrome .os-scrollbar .os-scrollbar-handle:hover {
  background: color-mix(in srgb, var(--foreground) 20%, transparent) !important;
}

.os-theme-monochrome .os-scrollbar .os-scrollbar-handle:active,
.os-theme-monochrome .os-scrollbar .os-scrollbar-handle.active {
  background: color-mix(in srgb, var(--foreground) 30%, transparent) !important;
}

kbd {
  @apply inline-flex items-center justify-center gap-1 px-2 py-1 text-xs font-mono;
  @apply bg-background border border-border text-foreground-secondary;
  box-shadow:
    0 1px 0 1px color-mix(in srgb, var(--shadow) 4%, transparent),
    0 2px 0 color-mix(in srgb, var(--shadow) 6%, transparent),
    inset 0 -1px 0 color-mix(in srgb, var(--shadow) 4%, transparent);
}

.btn {
  @apply px-6 py-3 font-mono text-sm uppercase tracking-wider transition-all duration-150 flex items-center justify-center gap-2;
  @apply border border-foreground rounded-none;
  font-synthesis: none;
  -webkit-font-smoothing: antialiased;
  box-shadow: 3px 3px 0 0 var(--foreground);
}

.btn:hover {
  box-shadow: 2px 2px 0 0 var(--foreground);
  transform: translate(1px, 1px);
}

.btn:active {
  box-shadow: 0 0 0 0 var(--foreground);
  transform: translate(3px, 3px);
}

.btn:disabled {
  @apply opacity-50 cursor-not-allowed;
  box-shadow: 3px 3px 0 0 color-mix(in srgb, var(--foreground) 30%, transparent);
}

.btn:disabled:hover {
  transform: none;
  box-shadow: 3px 3px 0 0 color-mix(in srgb, var(--foreground) 30%, transparent);
}

.btn-primary {
  @apply bg-background text-foreground;
}

.btn-primary:hover {
  @apply bg-surface-secondary;
}

.btn-secondary {
  @apply bg-background text-foreground;
}

.btn-secondary:hover {
  @apply bg-surface-secondary;
}

/* Small button variant */
.btn-sm {
  @apply px-3 py-1.5 text-xs;
  box-shadow: 2px 2px 0 0 var(--foreground);
}

.btn-sm:hover {
  box-shadow: 1px 1px 0 0 var(--foreground);
  transform: translate(1px, 1px);
}

.btn-sm:active {
  box-shadow: 0 0 0 0 var(--foreground);
  transform: translate(2px, 2px);
}

/* Icon-only button */
.btn-icon {
  @apply p-2;
  box-shadow: 2px 2px 0 0 var(--foreground);
}

.btn-icon:hover {
  box-shadow: 1px 1px 0 0 var(--foreground);
  transform: translate(1px, 1px);
}

.btn-icon:active {
  box-shadow: 0 0 0 0 var(--foreground);
  transform: translate(2px, 2px);
}

/* Outline/ghost variant - no shadow, just border */
.btn-outline {
  @apply bg-transparent text-foreground border border-foreground;
  box-shadow: none;
}

.btn-outline:hover {
  @apply bg-surface-secondary;
  box-shadow: none;
  transform: none;
}

.btn-outline:active {
  @apply bg-surface-tertiary;
  box-shadow: none;
  transform: none;
}

/* Brutalist button - compact version with sharp shadow */
.btn-brutalist {
  padding: 0.5rem 1rem;
  font-family: var(--font-family-mono), monospace;
  font-size: 0.875rem;
  background-color: var(--background);
  color: var(--foreground);
  border: 2px solid var(--foreground);
  transition: all 100ms ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  cursor: pointer;
  box-shadow: 3px 3px 0 0 var(--foreground);
}

.btn-brutalist:hover {
  box-shadow: 1px 1px 0 0 var(--foreground);
  transform: translate(2px, 2px);
}

.btn-brutalist:active {
  box-shadow: 0 0 0 0 var(--foreground);
  transform: translate(3px, 3px);
}

.btn-brutalist:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  box-shadow: 3px 3px 0 0 color-mix(in srgb, var(--foreground) 30%, transparent);
}

.btn-brutalist:disabled:hover {
  transform: none;
  box-shadow: 3px 3px 0 0 color-mix(in srgb, var(--foreground) 30%, transparent);
}

/* Ensure consistent number widths in UI */
.tabular-nums {
  font-variant-numeric: tabular-nums;
}

.badge {
  @apply inline-flex items-center bg-foreground text-background px-2 py-0.5 text-xs font-mono uppercase tracking-widest;
}

.input {
  @apply w-full p-4 border border-border focus:border-foreground focus:outline-none transition-colors;
}

.input-underline {
  @apply w-full p-0 border-0 border-b border-border bg-transparent placeholder-muted-foreground resize-none focus:ring-0 focus:border-foreground transition-colors;
}

@keyframes modal-overlay-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes modal-content-in {
  from {
    opacity: 0;
    transform: scale(0.96) translateY(-8px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.modal-overlay {
  animation: modal-overlay-in 150ms cubic-bezier(0.16, 1, 0.3, 1);
  will-change: opacity;
}

.modal-content {
  animation: modal-content-in 150ms cubic-bezier(0.16, 1, 0.3, 1);
  will-change: transform, opacity;
}

@keyframes wizard-step-enter {
  from {
    opacity: 0;
    transform: translateX(8px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.wizard-step-enter {
  animation: wizard-step-enter 150ms cubic-bezier(0.16, 1, 0.3, 1);
}

@media (prefers-reduced-motion: reduce) {
  .modal-overlay,
  .modal-content,
  .wizard-step-enter {
    animation: none;
  }

  /* Disable skeleton pulse animation for users who prefer reduced motion */
  .animate-pulse {
    animation: none;
  }
}

@keyframes logo-pulse {
  0%,
  100% {
    opacity: 0.2;
  }
  50% {
    opacity: 1;
  }
}

.logo-bar {
  display: flex;
  gap: 2px;
  align-items: center;
}

.logo-bar span {
  width: 3px;
  height: 10px;
  background: currentColor;
  animation: logo-wave 1.5s ease-in-out infinite;
}

.logo-bar span:nth-child(1) {
  animation-delay: 0s;
}
.logo-bar span:nth-child(2) {
  animation-delay: 0.1s;
}
.logo-bar span:nth-child(3) {
  animation-delay: 0.2s;
}
.logo-bar span:nth-child(4) {
  animation-delay: 0.3s;
}
.logo-bar span:nth-child(5) {
  animation-delay: 0.4s;
}
.logo-bar span:nth-child(6) {
  animation-delay: 0.5s;
}
.logo-bar span:nth-child(7) {
  animation-delay: 0.6s;
}

@keyframes logo-wave {
  0%,
  100% {
    opacity: 0.3;
  }
  50% {
    opacity: 1;
  }
}

/* Marquee animation for feature strip */
@keyframes marquee {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.marquee-container {
  overflow: hidden;
  position: relative;
}

.marquee-container::before,
.marquee-container::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 60px;
  z-index: 2;
  pointer-events: none;
}

.marquee-container::before {
  left: 0;
  background: linear-gradient(to right, var(--background), transparent);
}

.marquee-container::after {
  right: 0;
  background: linear-gradient(to left, var(--background), transparent);
}

.marquee-track {
  display: flex;
  width: fit-content;
  animation: marquee 30s linear infinite;
}

.marquee-track:hover {
  animation-play-state: paused;
}

/* Hero entrance animations */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.6s ease-out forwards;
  opacity: 0;
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out forwards;
  opacity: 0;
}

.animate-slide-in-left {
  animation: slide-in-left 0.5s ease-out forwards;
  opacity: 0;
}

/* Staggered animation delays */
.delay-100 {
  animation-delay: 100ms;
}
.delay-200 {
  animation-delay: 200ms;
}
.delay-300 {
  animation-delay: 300ms;
}
.delay-400 {
  animation-delay: 400ms;
}
.delay-500 {
  animation-delay: 500ms;
}

/* Feature card hover lift effect */
.feature-card {
  transition: all 0.2s ease;
}

.feature-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

/* Step number pulse on hover */
.step-number {
  transition: all 0.2s ease;
}

.step-card:hover .step-number {
  background-color: var(--foreground);
  color: white;
  transform: scale(1.05);
}

/* Underline animation for links */
.link-underline {
  position: relative;
}

.link-underline::after {
  content: "";
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 1px;
  background-color: currentColor;
  transition: width 0.2s ease;
}

.link-underline:hover::after {
  width: 100%;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .marquee-track {
    animation: none;
  }

  .animate-fade-in-up,
  .animate-fade-in,
  .animate-slide-in-left {
    animation: none;
    opacity: 1;
  }

  .feature-card:hover {
    transform: none;
  }

  .step-card:hover .step-number {
    transform: none;
  }
}

/* File tree drag and drop styles */
[data-react-arborist-dragging="true"] {
  opacity: 0.5;
}

[data-react-arborist-drop-target="true"] {
  background-color: color-mix(in srgb, var(--foreground) 8%, transparent) !important;
  outline: 2px dashed color-mix(in srgb, var(--foreground) 30%, transparent);
  outline-offset: -2px;
}

[data-react-arborist-drop-target="true"][data-react-arborist-drop-position="inside"] {
  background-color: color-mix(in srgb, var(--foreground) 12%, transparent) !important;
  outline: 2px solid color-mix(in srgb, var(--foreground) 40%, transparent);
}

/* Drop indicator line for reordering */
[data-react-arborist-drop-target="true"][data-react-arborist-drop-position="before"]::before,
[data-react-arborist-drop-target="true"][data-react-arborist-drop-position="after"]::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background-color: var(--foreground);
  pointer-events: none;
}

[data-react-arborist-drop-target="true"][data-react-arborist-drop-position="before"]::before {
  top: 0;
}

[data-react-arborist-drop-target="true"][data-react-arborist-drop-position="after"]::after {
  bottom: 0;
}

/* File tree items - cursor managed by JS during drag */
[role="treeitem"] {
  cursor: default;
}

/* Radix UI animations */
@keyframes radix-overlay-show {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes radix-overlay-hide {
  from { opacity: 1; }
  to { opacity: 0; }
}
@keyframes radix-content-show {
  from { opacity: 0; transform: translate(-50%, -50%) scale(0.96); }
  to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}
@keyframes radix-content-hide {
  from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  to { opacity: 0; transform: translate(-50%, -50%) scale(0.96); }
}
@keyframes radix-select-show {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes radix-select-hide {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-4px); }
}

[data-radix-dialog-overlay][data-state="open"] {
  animation: radix-overlay-show 150ms cubic-bezier(0.16, 1, 0.3, 1);
}
[data-radix-dialog-overlay][data-state="closed"] {
  animation: radix-overlay-hide 100ms ease-in;
}
[data-radix-dialog-content][data-state="open"] {
  animation: radix-content-show 150ms cubic-bezier(0.16, 1, 0.3, 1);
}
[data-radix-dialog-content][data-state="closed"] {
  animation: radix-content-hide 100ms ease-in;
}
[data-radix-select-content][data-state="open"] {
  animation: radix-select-show 120ms cubic-bezier(0.16, 1, 0.3, 1);
}
[data-radix-select-content][data-state="closed"] {
  animation: radix-select-hide 80ms ease-in;
}

/* File tree highlight animation */
@keyframes file-highlight {
  0%, 100% {
    background-color: transparent;
  }
  25%, 75% {
    background-color: color-mix(in srgb, var(--foreground) 15%, transparent);
  }
}

.animate-highlight {
  animation: file-highlight 1.5s ease-in-out;
}
